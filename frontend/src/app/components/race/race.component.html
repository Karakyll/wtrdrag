<div class="container">
  <h1>Races</h1>
  <div>
    <table class="table table-striped table-hover table-condensed">
      <tr>
        <td><b>Race Id</b></td>
        <td><b>Track Id</b></td>
        <td><b>Car Id</b></td>
        <td><b>Date and time</b></td>
        <td><b>Reaction time</b></td>
        <td><b>Elapsed time</b></td>
        <td><b>Finish speed</b></td>
        <td class="danger"><b>Delete race</b></td>
      </tr>
      <tr *ngFor="let race of races">
        <td>{{race.raceId}}</td>
        <td>{{race.trackId}}</td>
        <td><a [routerLink]="['/cars', race.carId]">{{race.carId}}</a></td>
        <td>{{race.dateTime}}</td>
        <td>{{race.reactionTime}}</td>
        <td>{{race.elapsedTime}}</td>
        <td>{{race.finishSpeed}}</td>
        <td><button class="btn btn-danger btn-xs" (click)="deleteRace(race)">X</button></td>
      </tr>
    </table>
  </div>
  <button class="btn" (click)=onSubmit() *ngIf=!submitted>Add new race</button>
  <div *ngIf=submitted>
    <h2>Add new race</h2>
    <form (ngSubmit)="onSubmit()" #raceForm="ngForm">
      <div class="form-group row">
        <div class="col-xs-4">
          <label for="trackId">Track ID</label>
          <input type="number" [(ngModel)]="trackId" class="form-control input-sm" name="trackId" #trackIdInput="ngModel" required>
          <div [hidden]="trackIdInput.valid || trackIdInput.pristine"
               class="alert alert-danger">
            Track ID is required
          </div>
        </div> 
      </div>
      <div class="form-group row">
        <div class="col-xs-4">
          <label for="carId">Car ID</label>
          <input type="number" [(ngModel)]="carId" class="form-control input-sm" name="carId" #carIdInput="ngModel" required>
          <div [hidden]="carIdInput.valid || carIdInput.pristine"
               class="alert alert-danger">
            Car ID is required
          </div>
        </div> 
      </div>
      <div class="form-group row">
        <div class="col-xs-4">
          <label for="dateTime">Date and time</label>
          <input type="date" [(ngModel)]="date" class="form-control input-sm" name="date" #dateInput="ngModel" required>
          <div [hidden]="dateInput.valid || dateInput.pristine"
               class="alert alert-danger">
            Date is required
          </div>
          <input type="time" [(ngModel)]="time" class="form-control input-sm" name="time" #timeInput="ngModel" required>
          <div [hidden]="timeInput.valid || timeInput.pristine"
               class="alert alert-danger">
            Time is required
          </div>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-xs-4">
          <label for="reactionTime">Reaction time</label>
          <input type="number" [(ngModel)]="reactionTime" class="form-control input-sm" name="reactionTime" #reactionTimeInput="ngModel" required>
          <div [hidden]="reactionTimeInput.valid || reactionTimeInput.pristine"
               class="alert alert-danger">
            Reaction time is required
          </div>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-xs-4">
          <label for="elapsedTime">Elapsed time</label>
          <input type="number" [(ngModel)]="elapsedTime" class="form-control input-sm" name="elapsedTime" #elapsedTimeInput="ngModel" required>
          <div [hidden]="elapsedTimeInput.valid || elapsedTimeInput.pristine"
               class="alert alert-danger">
            Elapsed time is required
          </div>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-xs-4">
          <label for="finishSpeed">Finish speed</label>
          <input type="number" [(ngModel)]="finishSpeed" class="form-control input-sm" name="finishSpeed" #finishSpeedInput="ngModel" required>
          <div [hidden]="finishSpeedInput.valid || finishSpeedInput.pristine"
               class="alert alert-danger">
            Finish speed is required
          </div>
        </div>
      </div>
      <button class="btn" type="submit" (click)=addNewRace() [disabled]="!raceForm.form.valid">Add</button>
      <button class="btn btn-danger" type="submit" (click)="submitted=false">Cancel</button>
    </form>
  </div>
</div>
<div>
  <br>
</div>


